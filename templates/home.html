{% extends "base.html" %}

{% block title %} Annotator Home {% endblock %}
{% block display_title %} Annotator Home {% endblock %}
{% block display_title_sub %}{% endblock %}


{% macro transcript_table(transcripts, table_id) -%}
    <table id="{{table_id}}" class="table table-bordered">
        <thead><tr>
            <th>State</th>
            <th>Session</th>
            <th>Class</th>
            <th>Domain</th>
            <th>Area</th>
            <th>SubArea</th>
            <th>ProblemFromLearner</th>
            <th>LastSaved</th>
        </tr></thead>

        {% for transcript in transcripts %}
        <tr>
            <td class="nowrap">
                <a title="Open Transcript"
                    class="btn-sm btn-primary"
                    href="{{url_for('main.edit_page', scriptid=transcript.id)}}"
                ><span class="glyphicon glyphicon-pencil"></span></a>
                &nbsp; {{transcript.state}}
            </td>
            <td class="nowrap">
                {{transcript.script_identifier}}
                {% if transcript.verify %}
                    <span class="label label-danger">
                        <span class="glyphicon glyphicon-check"></span> Verify
                    </span>
                {% endif %}
                {% if transcript.training %}
                    <span class="label label-warning">
                        <span class="glyphicon glyphicon-book"></span> Training
                    </span>
                {% endif %}
            </td>
            <td class="nowrap">{{transcript.class_level}}</td>
            <td style="min-width: 180px;">{{transcript.domain}}</td>
            <td style="min-width: 180px;">{{transcript.area}}</td>
            <td style="min-width: 180px;">{{transcript.subarea}}</td>
            <td>{{transcript.problem_from_learner[:50]}}</td>
            <td style="min-width: 180px;">{{transcript.last_saved_time}}</td>
        </tr>
        {% endfor %}
    </table>
{%- endmacro %}



{% block main_content %}

<div class="row">
    <div class="col-md-12">

    </div>
</div>

<div class="row">
<div class="col-md-12">

    <ul id="tabs" class="nav nav-pills" role="tablist" data-tabs="tabs">
        <li class="active"><a href="#owned" data-toggle="owned">Owned By Me</a></li>
        <li><a href="#assigned" data-toggle="assigned">Assigned To Me</a></li>
    </ul>

    <br/>

    <div id="my-tab-content" class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="owned">
            {{transcript_table(owned, 'owned-table')}}
        </div>
        <div role="tabpanel" class="tab-pane" id="assigned">
            {{transcript_table(assigned, 'assigned-table')}}
        </div>
    </div>

</div>
</div>

{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    $(".table").dataTable();
    $("#tabs").tab();
    $("#tabs a").click(function (e) {
        e.preventDefault();
        $(this).tab("show");
    });
});
</script>
{% endblock %}
