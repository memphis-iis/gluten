{% extends "base.html" %}

{% block title %} Annotator Home {% endblock %}
{% block display_title %} Annotator Home {% endblock %}
{% block display_title_sub %}{% endblock %}

{% block main_content %}
<div class="row">
    <div class="col-md-12">
        <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
            <li class="active"><a href="#todo" data-toggle="todo">Left To Do</a></li>
            <li><a href="#pending" data-toggle="pending">Pending (Not Started)</a></li>
            <li><a href="#inprogress" data-toggle="inprogess">In Progress</a></li>
            <li><a href="#completed" data-toggle="completed">Completed</a></li>
            <li><a href="#all" data-toggle="all">ALL</a></li>
        </ul>
    </div>
</div>

<div class="row">
<div class="col-md-12">
<br/>
<div id="my-tab-content" class="tab-content">
    <div class="tab-pane active" id="todo">
        <table id="allTranscripts" class="table table-bordered">
            <thead><tr>
                <th>State</th>
                <th>Session</th>
                <th>Class</th>
                <th>Domain</th>
                <th>Area</th>
                <th>SubArea</th>
                <th>ProblemFromLearner</th>
                <th>LastSaved</th>
            </tr></thead>

            {% for transcript in transcripts %}
            <tr>
                <td class="nowrap">
                    <a title="Open Transcript"
                        class="btn-sm btn-primary"
                        href="{{url_for('edit_page', scriptid=transcript.id)}}"
                    ><span class="glyphicon glyphicon-pencil"></span></a>
                    &nbsp; {{transcript.state}}
                </td>
                <td class="nowrap">
                    {{ts.scriptId}}
                    <c:if test="{{ts.verify}}">
                        <span class="label label-danger">
                            <span class="glyphicon glyphicon-check"></span> Verify
                        </span>
                    </c:if>
                    <c:if test="{{ts.training}}">
                        <span class="label label-warning">
                            <span class="glyphicon glyphicon-book"></span> Training
                        </span>
                    </c:if>
                </td>
                <td class="nowrap"><c:out value="{{ts.classLevel}}" /></td>
                <td style="min-width: 180px;"><c:out value="{{ts.domain}}" /></td>
                <td style="min-width: 180px;"><c:out value="{{ts.area}}" /></td>
                <td style="min-width: 180px;"><c:out value="{{ts.subarea}}" /></td>
                <td><c:out value="{{cf:abbreviate(ts.problemFromLearner, 50)}}" /></td>
                <td style="min-width: 180px;"><c:out value="{{ts.lastSavedTime}}" /></td>
            </tr>
            {% endif %}
        </table>
        <t:transcriptTable tableid="transcriptsAvailable">
            <jsp:attribute name="rows">
                <t:transcriptRows state="Pending" rows="{{pendingSessions}}" />
                <t:transcriptRows state="InProgress" rows="{{inProgessSessions}}" />
            </jsp:attribute>
        </t:transcriptTable>
    </div>
    <div class="tab-pane" id="pending">
        <t:transcriptTable tableid="transcriptsPending">
            <jsp:attribute name="rows">
                <t:transcriptRows state="Pending" rows="{{pendingSessions}}" />
            </jsp:attribute>
        </t:transcriptTable>
    </div>
    <div class="tab-pane" id="inprogress">
        <t:transcriptTable tableid="transcriptsInProgress">
            <jsp:attribute name="rows">
                <t:transcriptRows state="InProgress" rows="{{inProgessSessions}}" />
            </jsp:attribute>
        </t:transcriptTable>
    </div>
    <div class="tab-pane" id="completed">
        <t:transcriptTable tableid="transcriptsCompleted">
            <jsp:attribute name="rows">
                <t:transcriptRows state="Completed" rows="{{completedSessions}}" />
            </jsp:attribute>
        </t:transcriptTable>
    </div>
    <div class="tab-pane" id="all">
        <t:transcriptTable tableid="transcriptsAll">
            <jsp:attribute name="rows">
                <t:transcriptRows state="Pending" rows="{{pendingSessions}}" />
                <t:transcriptRows state="InProgress" rows="{{inProgessSessions}}" />
                <t:transcriptRows state="Completed" rows="{{completedSessions}}" />
            </jsp:attribute>
        </t:transcriptTable>
    </div>
</div>
</div>
</div>

{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    $(".table").dataTable();

    $("#tabs").tab();

    $("#tabs a").click(function (e) {
        e.preventDefault();
        $(this).tab("show");
    });
});
</script>
{% endblock %}
